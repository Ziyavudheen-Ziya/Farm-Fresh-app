<%- include('../partials/header') %>




<style>

    #userAddressValue{
        display: ruby-text; 
        flex-direction: row; 
        flex-wrap: wrap;
        text-align: center; 
        justify-content: space-evenly;
    }

    .addressItems{
        background-color: #f9f9f9;
        padding: 15px;
        margin: 10px;
    }

    .addressItems:hover {
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .addressItems h2 {
        margin-top: 0;
    }

    .addressItems p {
        margin: 5px 0;
    }

    .button-group {
        display: flex;
        justify-content: space-between;
    }

    .button-group button {
        flex: 1;
        margin: 0 5px;
    }

    .responsive-table th.active {
        background-color: #d9e4f0; /* Active column background color */
        color: #fff; /* Active column text color */
    }

    .responsive-table th {
            width: 100%;
            text-align: center;
            padding: 5px;
        }

        /* Responsive styles */
        @media (max-width: 767px) {
        .responsive-table {
            display: flex !important;
            justify-content: center;
            text-align: center;
            width: 100%;
            /* display: block; */
        }

        .responsive-table tr {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-evenly;
            margin-bottom: 10px;
        }

        .responsive-table th {
            width: 100%;
            text-align: center;
            padding: 5px;
        }

        .responsive-table th.active {
            background-color: #d9e4f0; /* Active column background color */
            color: #fff; /* Active column text color */
        }
        .button-group {
            flex-direction: column;
        }

        .button-group button {
            margin: 5px 0;
        }
    }

</style>

        <div class="container profile-container">
            <div class="page-header text-center" style="background-image: url('assets/images/page-header-bg.jpg')">
        		<div class="container">
        			<h1 class="page-title"><span>My address</span></h1>
        		</div><!-- End .container -->
        	</div><!-- End .page-header -->
            <nav aria-label="breadcrumb" class="breadcrumb-nav mb-2">
                <div class="container">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/">Home</a></li>
                        <li class="breadcrumb-item active" aria-current="page">My Address</li>
                    </ol>
                </div><!-- End .container -->
            </nav><!-- End .breadcrumb-nav -->
            <!-- <div style="display: flex; flex-direction: row; text-align: center; justify-content: space-evenly;">
                <div><a href="/profile">Profile</a></div>
                <div><a href="/profileChangePassword">Change Password</a></div>
                <div><a href="/addAddress">Add address</a></div>
                <div class="btn btn-light active"><a href="/myAddress">My address</a></div>
                <div><a href="/profile/userOrders">My Orders</a></div>
            </div> -->

            <table class="responsive-table" style="width: 100%;">
                <tr style="display: flex; justify-content: space-evenly;">
                    <th>
                        <a href="/profilePage">Profile</a>
                    </th>
                    <th>
                        <a href="">Change Password</a>
                    </th>
                    <th>
                        <a href="/addAddress">Add address</a>
                    </th>
                    <th class="active">
                        <a href="#">My address</a>
                    </th>
                    <th>
                        <a href="/myOrdersPage">My Orders</a>
                    </th>
                </tr>
            </table>
            <hr>
                


            <div class="user-details" id="">
                   
                

              <%  addressData.reverse().forEach((address)=>{ %>



          
                    <div class="addressItems">
                        <h2></h2>
                        <p><strong>Name : </strong><%=address?.name%> </p>
                         <p><strong>Mobile No : </strong><%=address?.phone%> </p>
                        <p><strong>House Number :</strong><%=address?.houseNumber%> </p>
                        <p><strong>City : </strong><%=address?.city%> </p>
                        <p><strong>State : </strong><%=address?.state%> </p>
                        <p><strong>Pincode : </strong><%=address?.pincode%> </p>
                        <hr>
                        <a href="/editAddressPage/<%=address._id%>"><button class="btn btn-outline-primary-2" ></address>>Edit</button></a>

                        <button  class="btn btn-danger"  onclick="addressDelete('<%=address._id%>')">Delete</button>
                    </div>

                    
              <%  }) %>
                 
               
            </div>
    
       
    
            <hr>
    
            <!-- <div class="row">
                <div class="col-md-6">
                    <div class="address-section">
                        <h2>Address</h2>
                        <p><strong>Street:</strong> 123 Main St</p>
                        <p><strong>City:</strong> Cityville</p>
                        <p><strong>Zip Code:</strong> 12345</p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="edit-form" id="editForm">
                        <h2>Edit Address</h2>
                        <form id="addressForm">
                            <div class="form-group">
                                <label for="street">Street:</label>
                                <input type="text" class="form-control" id="street" name="street" placeholder="Enter street">
                            </div>
                            <div class="form-group">
                                <label for="city">City:</label>
                                <input type="text" class="form-control" id="city" name="city" placeholder="Enter city">
                            </div>
                            <div class="form-group">
                                <label for="zip">Zip Code:</label>
                                <input type="text" class="form-control" id="zip" name="zip" placeholder="Enter zip code">
                            </div>
                            <button type="button" class="btn btn-primary" onclick="saveChanges()">Save Changes</button>
                        </form>
                    </div>
                </div>
            </div> -->

            <script>
                 
                   async function addressDelete(addressId){

                    console.log(`adress${addressId}`);


                     let response = await fetch(`/deleteAddress?id=${addressId}`,{


                        method:"delete"
                          
                     });

                     let result = await response.json()

                       if(result.deleted){

                           await Swal.fire({
                              
                              icon:"success",
                              title:"Conform To Deleting",
                              confirmButtonText:"OK"
                           });


                       }

                       window.location.reload()
                      
                   }
            </script>
    
        </div>




        





        <%- include ('../partials/footer') %>

